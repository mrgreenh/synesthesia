{"version":3,"sources":["../../js6/views/actorEditorForm.js"],"names":[],"mappings":"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","file":"static/js/js6/views/actorEditorForm.js","sourcesContent":["var ActorEditor = React.createClass({\n    mixins: [React.addons.LinkedStateMixin],\n    ADSREnvelopeAttributes: [\"attack\", \"decay\", \"sustain\", \"release\"],\n    getInitialState: function(){\n        return this.props.actorData;\n    },\n\n    _getLayerClassName: function(){\n        var layerType = this.props.layerType;\n        return layerType;\n    },\n\n    _getActorParameters: function(className){\n        var fullClassName = className || this.state.className;\n        var layerClassName = this._getLayerClassName();\n        return window[fullClassName].getActorParameters();\n    },\n\n    handleActorClassChange: function(e){\n        var className = e.currentTarget.value;\n        this.setState({\n            className: className\n        });\n        this.setState({\n            specificParams: this._getActorParameters(className)\n        });\n    },\n\n    _getLayerAvailableActors: function(){\n        var layerClassName = this._getLayerClassName();\n        return window[layerClassName].getAvailableActorsClasses();\n    },\n\n    _loadLayerDependentFields: function(){\n        Synesthesia.loadLayersSynesthesiaClasses([this.props.layerType]).done(() => {\n            this._getLayerAvailableActors().done(classes => {\n                this.setState({\n                    availableActorsClasses: classes,\n                });                            \n            });\n            this.setState({\n                specificParams: this._getActorParameters()\n            });            \n        });\n\n    },\n\n    render: function(){\n        //Will eventually rerender when class is loaded\n        //This needs to go first because also loads the actors parent class\n        //These two ifs should be preceded by some \"loadActorsDependencies\" thing first\n        if(!window[this.props.layerType])\n            this._loadLayerDependentFields();\n\n        var ADSRForms = _(this.ADSREnvelopeAttributes).map(_.bind(function(attr){\n           var attrHtmlName = \"actor-\" + attr;\n            return (\n               <div className=\"form-group form-inline\">\n                   <label htmlFor={attrHtmlName}>{attr} {this.state[attr]}</label>\n                   <input id={attrHtmlName} className=\"form-control\" valueLink={this.linkState(attr)} type=\"range\" min=\"0\" max=\"100\" />\n               </div>\n            );\n        }, this));\n\n        // var actorParametersForm = this._getActorParameters().map(paramName => {\n        if(this.state.specificParams){\n            var actorParametersForm = this.state.specificParams.map(paramName => {\n                return (\n                            <li className=\"form-group form-inline\">\n                                <label htmlFor={\"parameter-\"+paramName}>{paramName}</label>\n                                <input id={\"parameter-\"+paramName} className=\"form-control\" valueLink={this.linkState(paramName+\"Parameter\")} />\n                            </li>\n                    )\n            });\n        }else{\n            var actorParametersForm = \"Nothing to display\";\n        }\n\n        if(this.state.availableActorsClasses){\n            var actorClassOptions = this.state.availableActorsClasses.map(option => {\n                return (\n                    <option value={option}>{option}</option>\n                    );\n            });\n        }else{\n            var actorClassOptions = [];\n        }\n\n        return (\n            <Collapsable itemName={this.state.name}>\n                <ul className=\"parameters-list\">\n                    <li className=\"form-group\">\n                        <label htmlFor=\"actor-name\">Name</label>\n                        <input id=\"actor-name\" className=\"form-control\" valueLink={this.linkState(\"name\")} type=\"text\" />\n                    </li>\n                    <label htmlFor=\"actor-type\">Actor type:</label>\n                    <BetterSelect value={this.state.className} onChange={this.handleActorClassChange}>\n                        {actorClassOptions}\n                    </BetterSelect>\n                    <Collapsable itemName=\"actorParams\">\n                        <ul>\n                            {actorParametersForm}\n                        </ul>                        \n                    </Collapsable>\n                    <Collapsable itemName=\"Inputs\">\n                        <!-- How many inputs and what kind is defined by the actors class. For now only one -->\n                        <ul>\n                            <li className=\"form-group\">\n                                <label htmlFor=\"input-type\">Type</label>\n                                <BetterSelect valueLink={this.linkState(\"inputType\")}>\n                                    <option value=\"note\">Note</option>\n                                    <option value=\"control\">Control</option>\n                                </BetterSelect>\n                            </li>\n                            <li className=\"form-group form-inline\">\n                                <label htmlFor=\"input-channel\">Channel</label>\n                                <input id=\"input-channel\" className=\"form-control\" valueLink={this.linkState(\"inputChannel\")} type=\"number\" min=\"1\" />\n                            </li>\n                            <li className=\"form-group form-inline\">\n                                <label htmlFor=\"input-bus\">Bus</label>\n                                <!-- This can be a select with options filled in by the server -->\n                                <input id=\"input-bus\" className=\"form-control\" valueLink={this.linkState(\"inputBus\")} />\n                            </li>\n                            <li className=\"form-group form-inline\">\n                                <label htmlFor=\"input-range-max\">Range</label>\n                                <!-- Notes and controls will be enriched with a normalized version of their value, computed based on this range -->\n                                <input id=\"input-range-max\" className=\"form-control\" valueLink={this.linkState(\"inputRangeMax\")} type=\"number\" min=\"1\" />\n                                <input id=\"input-range-min\" className=\"form-control\" valueLink={this.linkState(\"inputRangeMin\")} type=\"number\" min=\"1\" />\n                            </li>\n                        </ul>\n                    </Collapsable>\n                    <Collapsable itemName=\"ADSR Envelope\">\n                        {ADSRForms}\n                    </Collapsable>\n                </ul>\n            </Collapsable>\n        );\n    },\n});\n"]}